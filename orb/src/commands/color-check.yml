description: >
  This command checks the inactive color against the color being deployed and cancels the pipeline if
  it is the LIVE color.

parameters:
  color:
    type: string
    default: ""
    description: "Color to check as inactive"
  record_name:
    type: string
    default: ""
    description: "DNS record_name (FQDN) to locate routing information"
  kvs_arn:
    type: string
    default: ""
    description: "KVS ARN to locate routing information"
  kvs_key:
    type: string
    default: ""
    description: "KVS Key to locate routing information"

steps:
  - set-up-cicd-env
  - run:
      environment:
        COLOR: <<parameters.color>>
        RECORD_NAME: <<parameters.record_name>>
        KVS_ARN: <<parameters.kvs_arn>>
        KVS_KEY: <<parameters.kvs_key>>
      name: color check
      command: color_check.py 
