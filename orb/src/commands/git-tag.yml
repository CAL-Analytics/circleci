description: >
  This command add a tag to the current git commit.

parameters:
  tag:
    type: string
    description: "Tag to add to the current git commit. i.e. v1.0.0"
  delete_tag:
    type: string
    default: ""
    description: "(Optional) Tag to delete if it exists. i.e. v1.0.0"
  run_checkout:
    type: boolean
    default: true
    description: "Whether to run the checkout step."
  run_set_up_cicd_env:
    type: boolean
    default: true
    description: "Whether to run the set up cicd env step."

steps:
  - when:
      condition: << parameters.run_checkout >>
      steps:
        - checkout
  - when:
      condition: << parameters.run_set_up_cicd_env >>
      steps:
        - set-up-cicd-env
  - run:
      environment:
        TAG: << parameters.tag >>
        DELETE_TAG: << parameters.delete_tag >>
      name: git tag
      # shell: /bin/xonsh -i
      command: git_tag.py
